### TCP 怎么确保传输可靠性
1. TCP在建立连接采用三次握手和断开连接四次挥手的连接管理机制（当时我只回答了这一个，然后面试官来了一句就因为这个就能确保传输的安全可靠吗。我是真想回答是的）。
2. 检验和。TCP检验和的计算与UDP一样，在计算时要加上12byte的伪首部，检验范围包括TCP首部及数据部分，但是UDP的检验和字段为可选的，而TCP中是必须有的。计算方法为：在发送方将整个报文段分为多个16位的段，然后将所有段进行反码相加，将结果存放在检验和字段中，接收方用相同的方法进行计算，如最终结果为检验字段所有位是全 1 则正确（UDP 中为 0 是正确），否则存在错误。
3. 确认应答机制（ACK）。TCP通过确认应答机制实现可靠的数据传输。在TCP的首部中有一个标志位——ACK，此标志位表示确认号是否有效。接收方对于按序到达的数据会进行确认，当标志位ACK=1时确认首部的确认字段有效。进行确认时，确认字段值表示这个值之前的数据都已经按序到达了。而发送方如果收到了已发送的数据的确认报文，则继续传输下一部分数据；而如果等待了一定时间还没有收到确认报文就会启动重传机制。
4. 超时重传机制。当报文发出后在一定的时间内未收到接收方的确认，发送方就会进行重传（通常是在发出报文段后设定一个闹钟，到点了还没有收到应答则进行重传）。
5. 流量控制。接收端处理数据的速度是有限的，如果发送方发送数据的速度过快，导致接收端的缓冲区满，而发送方继续发送，就会造成丢包，继而引起丢包重传等一系列连锁反应。
6. 拥塞控制。流量控制解决了两台主机之间因传送速率而可能引起的丢包问题，在一方面保证了 TCP 数据传送的可靠性。然而如果网络非常拥堵，此时再发送数据就会加重网络负担，那么发送的数据段很可能超过了最大生存时间也没有到达接收方，就会产生丢包问题。为此TCP引入启动机制，先发出少量数据，就像探路一样，先摸清当前的网络拥堵状态后，再决定按照多大的速度传送数据。此处引入一个拥塞窗口。
7. 序列号。TCP将每个字节的数据都进行了编号，这就是序列号。作用如下：
- 保证可靠性（当接收到的数据总少了某个序号的数据时，能马上知道）。
- 保证数据的按序到达。
- 提高效率，可实现多次发送，一次确认。
-  去除重复数据。